(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57780adb"],{1807:function(e,t,s){"use strict";s("9a4a")},"1cfc":function(e,t,s){e.exports=s.p+"img/close-circle.6c381fb5.svg"},"4e19":function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("b-card",[s("b-img",{staticClass:"image-show",attrs:{center:"",src:e.base64}}),s("b-form",[s("b-form-group",{attrs:{label:"选择图片：","label-for":"cover"}},[s("b-form-file",{attrs:{state:Boolean(e.image),placeholder:"Choose a file or drop it here...","drop-placeholder":"Drop file here...",accept:".png, .jpg, .jpeg"},model:{value:e.image,callback:function(t){e.image=t},expression:"image"}})],1)],1),s("b-row",{attrs:{"align-v":"center"}},[s("b-col",{attrs:{cols:"2"}},[s("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.calculate()}}},[e._v("计算")])],1),s("b-col",{attrs:{cols:"2"}},[e._v(" 计算状态： "+e._s(e.message)+" ")]),null!=e.result?s("b-col",[e._v(" 预测热导率："+e._s(e.result)+" W·m"),s("sup",[e._v("-1")]),e._v("·K"),s("sup",[e._v("-1")])]):e._e()],1),s("b-modal",{ref:"run-modal",attrs:{"cancel-disabled":"",title:"计算"}},e._l(e.processes,(function(e){return s("Process",{key:e.id,attrs:{status:e.status,message:e.message}})})),1)],1)],1)},r=[];s("d3b7");function a(e,t,s,n,r,a,o){try{var i=e[a](o),c=i.value}catch(u){return void s(u)}i.done?t(c):Promise.resolve(c).then(n,r)}function o(e){return function(){var t=this,s=arguments;return new Promise((function(n,r){var o=e.apply(t,s);function i(e){a(o,n,r,i,c,"next",e)}function c(e){a(o,n,r,i,c,"throw",e)}i(void 0)}))}}s("96cf");var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-row",[n("b-col",{staticClass:"text-center",attrs:{cols:"1"}},[e.showPadding?n("img",{staticClass:"status-icon",attrs:{src:s("6668")}}):e._e(),e.showDone?n("img",{staticClass:"status-icon",attrs:{src:s("cfcb")}}):e._e(),e.showError?n("img",{staticClass:"status-icon",attrs:{src:s("1cfc")}}):e._e(),e.showSpinner?n("b-spinner",{staticClass:"status-icon",attrs:{variant:"success"}}):e._e()],1),n("b-col",[e._v(" "+e._s(e.message)+" ")])],1)],1)},c=[],u={name:"Process",props:{status:String,message:String},computed:{showSpinner:function(){return"running"===this.status},showPadding:function(){return"padding"===this.status},showDone:function(){return"done"===this.status},showError:function(){return"error"===this.status}}},l=u,d=(s("7047"),s("2877")),f=Object(d["a"])(l,i,c,!1,null,null,null),m=f.exports,g={name:"Recognize",components:{Process:m},data:function(){return{image:null,base64:"",result:null,message:"就绪",processes:[{id:0,status:"padding",message:"上传图片"},{id:1,status:"padding",message:"计算"},{id:2,status:"padding",message:"预测热导率："}]}},watch:{image:function(){if(null!=this.image){var e=this;this.toBase64(this.image).then((function(t){e.base64=t}))}}},methods:{toBase64:function(e){return new Promise((function(t,s){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return s(e)}}))},updateProcess:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t&&(this.processes[e].status=t),s&&(this.processes[e].message=s)},calculate:function(){var e=this;if(this.updateProcess(0,"running"),!this.$socket.connected)return this.message="未连接！",e.updateProcess(0,"error","未连接"),void this.$refs["run-modal"].show();this.$refs["run-modal"].show(),this.uploadImg().then((function(t){e.updateProcess(0,"done"),e.updateProcess(1,"running"),e.message="正在计算！"})).catch((function(t){e.updateProcess(0,"error","上传失败："+t),e.message="上传出错！"}))},uploadImg:function(){var e=this;return o(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$socket.emit("image",e.base64);case 2:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;this.sockets.subscribe("result",(function(t){e.updateProcess(1,"done"),e.updateProcess(2,"done","热导率："+t),e.message="计算完成",e.result=t}))}},p=g,h=(s("1807"),Object(d["a"])(p,n,r,!1,null,null,null));t["default"]=h.exports},6668:function(e,t,s){e.exports=s.p+"img/info-circle.52290e58.svg"},7047:function(e,t,s){"use strict";s("f579")},"9a4a":function(e,t,s){},cfcb:function(e,t,s){e.exports=s.p+"img/check-circle.d4339267.svg"},f579:function(e,t,s){}}]);
//# sourceMappingURL=chunk-57780adb.4a8ab3ab.js.map